<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flix - Movie Search</title>

    <!-- Favicon -->
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="./images/movie-logo.png"
    />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;700;900&display=swap"
      rel="stylesheet"
    />

    <!-- Stylesheets -->
    <link rel="stylesheet" href="app.css" />
    <link rel="stylesheet" href="searchPage.css" />
  </head>
  <body>
    <!-- Navigation -->
    <header class="nav-wrapper">
      <div class="container">
        <nav class="nav">
          <a href="#" class="logo" aria-label="Flix Home">
            <i class="bx bx-movie-play bx-tada main-color"></i>Fl<span
              class="main-color"
              >i</span
            >x
          </a>
          <ul class="nav-menu">
            <li><a href="/">Home</a></li>
            <li><a href="#">Genre</a></li>
            <li><a href="#">Movies</a></li>
            <li><a href="#">Series</a></li>
            <li><a href="#">About</a></li>
            <li id="nav-auth">
              <a href="authentication/signup.html" class="btn btn-hover">
                <span>Sign Up</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- Search Section -->
    <section class="search-container">
      <div class="container">
        <h2>Find Your Favorite Movies</h2>
        <div class="search-box-wrapper">
          <input
            type="text"
            id="search-input"
            class="search-box"
            placeholder="Search for a movie..."
            aria-label="Search movies"
          />
          <button id="search-btn" aria-label="Search">Search</button>
        </div>
        <select id="category-filter" aria-label="Filter by category">
          <option value="">All Categories</option>
        </select>
      </div>
    </section>

    <!-- Movie Results -->
    <section class="search-results container">
      <h1 class="text-center">Trending Now</h1>
      <div id="movie-results"></div>
    </section>

    <!-- Scripts -->
    <script src="searchPage.js"></script>
    <script>
      const navAuth = document.getElementById("nav-auth");
      const loggedUser = JSON.parse(localStorage.loggedInUser);

      if (loggedUser && loggedUser.status) {
        navAuth.innerHTML = `
          <a href="profile.html" class="btn btn-hover">
            <span>Profile</span>
          </a>
          <button id="logout" class="btn-danger btn-danger-hover">
            <span>Logout</span>
          </button>
        `;

        document.getElementById("logout").addEventListener("click", function () {
          localStorage.removeItem("loggedInUser");
          window.location.href = "index.html"; // Ensure it works for all environments
        });
      }
    </script>
  </body>
</html>
